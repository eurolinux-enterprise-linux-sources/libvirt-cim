From ee74ebc122c60e86dd02442589b880c367a4eb9a Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?J=C3=A1n=20Tomko?= <jtomko@redhat.com>
Date: Wed, 21 Aug 2013 15:35:28 +0200
Subject: [PATCH 04/48] libvirt-cim.spec.in: Uninstall open-pegasus-specific
 providers from sfcb
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Older libvirt-cim might've installed these in the sblim-sfcb
repository, causing errors when calling sfcbrepos on libvirt-cim update.

Signed-off-by: JÃ¡n Tomko <jtomko@redhat.com>
Signed-off-by: John Ferlan <jferlan@redhat.com>
---
 libvirt-cim.spec.in | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/libvirt-cim.spec.in b/libvirt-cim.spec.in
index a027246..cd399b1 100644
--- a/libvirt-cim.spec.in
+++ b/libvirt-cim.spec.in
@@ -84,6 +84,13 @@ rm -fr $RPM_BUILD_ROOT
 	-n @CIM_VIRT_NS@ \
 	-r %{REGISTRATION} -m %{SCHEMA} >/dev/null 2>&1 || true
 
+# Remove open-pegasus-specific providers installed in sfcb repository
+# by older libvirt-cim packages
+%{_datadir}/%{name}/provider-register.sh -d -t sfcb \
+    -n root/PG_InterOp \
+    -r %{PGINTEROP_REG} -m %{PGINTEROP_MOF} >/dev/null 2>&1 || true
+
+
 %post
 /sbin/ldconfig
 
-- 
1.8.5.3

